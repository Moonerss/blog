import{_ as t,o as i,c as a,a as e,b as s}from"./app-B6iXF0Jq.js";const n={},l=e("h2",{id:"背景",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#背景"},[e("span",null,"背景")])],-1),h=e("p",null,"平时在命令行下ssh连接了远程服务器，经常才几分钟没操作就被自动断线了，不能进行任何操作，其实这是因为ssh没有设置心跳检测，可以通过以下两种方法解决。",-1),o=e("h2",{id:"本地机最常用的方法",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#本地机最常用的方法"},[e("span",null,"本地机最常用的方法")])],-1),r=e("p",null,"依赖ssh客户端定时发送心跳检测，配置/etc/ssh/ssh_config文件，在末尾添加上：",-1),c=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[e("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code","v-pre":""},[e("code",null,[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"ServerAliveInterval"),e("span",{style:{"--shiki-light":"#2F798A","--shiki-dark":"#4C9A91"}}," 20")]),s(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"ServerAliveCountMax"),e("span",{style:{"--shiki-light":"#2F798A","--shiki-dark":"#4C9A91"}}," 999")])])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),d=e("blockquote",null,[e("p",null,"每隔20秒向服务器发出一次心跳检测，若超过999次请求都没有成功，就主动断开与服务器端的连接。")],-1),p=e("h2",{id:"适用于服务器端",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#适用于服务器端"},[e("span",null,"适用于服务器端")])],-1),m=e("p",null,"依赖ssh服务器端定时发送心跳检测，配置/etc/ssh/sshd_config文件(注意：这里是sshd_config，不是ssh_config)，在末尾添加上:",-1),u=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[e("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code","v-pre":""},[e("code",null,[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"ClientAliveInterval"),e("span",{style:{"--shiki-light":"#2F798A","--shiki-dark":"#4C9A91"}}," 30")]),s(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"ClientAliveCountMax"),e("span",{style:{"--shiki-light":"#2F798A","--shiki-dark":"#4C9A91"}}," 6")])])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),k=e("blockquote",null,[e("p",null,"每隔30秒向客户端发出一次心跳检测，若超过6次请求都没有成功，就会主动断开与客户端的连接。")],-1),g=e("p",null,"设置了ssh的心跳检测后，重启ssh服务才能生效，执行命令",-1),_=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[e("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code","v-pre":""},[e("code",null,[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"service"),e("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," ssh"),e("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," restart")])])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),v=[l,h,o,r,c,d,p,m,u,k,g,_];function f(y,A){return i(),a("div",null,v)}const x=t(n,[["render",f],["__file","index.html.vue"]]),C=JSON.parse(`{"path":"/software/ssh/","title":"SSH连接自动断开问题","lang":"zh-CN","frontmatter":{"title":"SSH连接自动断开问题","author":"Jeason","createTime":"2020/11/16 19:48:23","permalink":"/software/ssh/","tags":["ssh"],"description":"背景 平时在命令行下ssh连接了远程服务器，经常才几分钟没操作就被自动断线了，不能进行任何操作，其实这是因为ssh没有设置心跳检测，可以通过以下两种方法解决。 本地机最常用的方法 依赖ssh客户端定时发送心跳检测，配置/etc/ssh/ssh_config文件，在末尾添加上： 每隔20秒向服务器发出一次心跳检测，若超过999次请求都没有成功，就主动断开...","head":[["script",{"id":"check-dark-mode"},";(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;if (um === 'dark' || (um !== 'light' && sm)) {document.documentElement.classList.add('dark');}})();"],["script",{"id":"check-mac-os"},"document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))"],["meta",{"property":"og:url","content":"https://jeason.netlify.app/software/ssh/"}],["meta",{"property":"og:title","content":"SSH连接自动断开问题"}],["meta",{"property":"og:description","content":"背景 平时在命令行下ssh连接了远程服务器，经常才几分钟没操作就被自动断线了，不能进行任何操作，其实这是因为ssh没有设置心跳检测，可以通过以下两种方法解决。 本地机最常用的方法 依赖ssh客户端定时发送心跳检测，配置/etc/ssh/ssh_config文件，在末尾添加上： 每隔20秒向服务器发出一次心跳检测，若超过999次请求都没有成功，就主动断开..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-14T02:10:42.000Z"}],["meta",{"property":"article:author","content":"Jeason"}],["meta",{"property":"article:tag","content":"ssh"}],["meta",{"property":"article:modified_time","content":"2024-05-14T02:10:42.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"SSH连接自动断开问题\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-05-14T02:10:42.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Jeason\\"}]}"]]},"headers":[{"level":2,"title":"背景","slug":"背景","link":"#背景","children":[]},{"level":2,"title":"本地机最常用的方法","slug":"本地机最常用的方法","link":"#本地机最常用的方法","children":[]},{"level":2,"title":"适用于服务器端","slug":"适用于服务器端","link":"#适用于服务器端","children":[]}],"isBlogPost":true,"readingTime":{"minutes":0.95,"words":285},"git":{"updatedTime":1715652642000},"autoDesc":true,"filePathRelative":"software/ssh.md","categoryList":[{"type":10006,"name":"software"}]}`);export{x as comp,C as data};
